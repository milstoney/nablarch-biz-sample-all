<?xml version="1.0" encoding="UTF-8"?>
<component-configuration xmlns="http://tis.co.jp/nablarch/component-configuration"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://tis.co.jp/nablarch/component-configuration ../../../../../../Nablarch/resources/component-configuration.xsd">

  <import file="please/change/me/common/captcha/sample/handler/db.xml" />
  <import file="please/change/me/common/captcha/sample/handler/error.xml" />
  <import file="please/change/me/common/captcha/sample/handler/nablarchTag.xml" />
  <import file="please/change/me/common/captcha/sample/handler/log.xml" />
  <import file="please/change/me/common/captcha/sample/handler/sessionConcurrentAccess.xml" />
  <import file="please/change/me/common/captcha/sample/handler/threadcontext.xml" />
  <import file="please/change/me/common/captcha/sample/handler/permissionCheck.xml" />
  <import file="please/change/me/common/captcha/sample/handler/serviceAvailability.xml" />
  
  <import file="please/change/me/common/captcha/sample/common/date.xml" />
  <import file="please/change/me/common/captcha/sample/common/message.xml" />
  <import file="please/change/me/common/captcha/sample/common/validation.xml" />
  
  <import file="please/change/me/common/captcha/sample/handler.xml" />
  
  <import file="please/change/me/common/captcha/CaptchaTest.xml" />
  
  <!-- 初期化が必要なコンポーネント -->
  <component name="initializer"
      class="nablarch.core.repository.initialization.BasicApplicationInitializer">
      <property name="initializeList">
          <list>
              <!-- common/message.xml:文字列リソースのキャッシュ -->
              <component-ref name="stringResourceCache" />
              <!-- common/validation.xml:バリデーション情報のキャッシュ -->
              <component-ref name="formDefinitionCache" />
              <!-- common/validation.xml:バリデーション -->
              <component-ref name="validationManager" />
              <!-- web/handler/permissionCheck.xml:認証機能 -->
              <component-ref name="permissionFactory" />
              <!-- common/date.xml:業務日付コンポーネント -->
              <component-ref name="businessDateProvider" />
              <!-- web/handler/serviceAvailability.xml:サービス提供可否 -->
              <component-ref name="serviceAvailability" />
          </list>
      </property>
  </component>
  
  
  <!-- キャプチャ生成 -->
  <component name="captchaGenerator"
      class="please.change.me.common.captcha.CaptchaGenerator">
    <property name="imageType" value="jpeg"/>
    <property name="configParameters">
      <map>
<!--
        <entry key="kaptcha.textproducer.font.color" value="red" />
        <entry key="kaptcha.noise.color" value="red" />
-->
      </map>
    </property>
  </component>
  
  <!-- キャプチャ生成アクション -->
  <component name="captchaGenerateHandler" class="please.change.me.common.captcha.CaptchaGenerateHandler">
  </component>
  
</component-configuration>
